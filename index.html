<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Beyond the Curve</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        :root {
            --primary-green: #4CAF50;
            --light-green: #C8E6C9;
            --accent-gold: #FFD700;
            --light-yellow: #FFF9C4;
            --white: #FFFFFF;
            --dark-text: #333333;
        }
        .bg-primary-green { background-color: var(--primary-green); }
        .bg-light-green { background-color: var(--light-green); }
        .bg-accent-gold { background-color: var(--accent-gold); }
        .bg-light-yellow { background-color: var(--light-yellow); }
        .text-primary-green { color: var(--primary-green); }
        .text-accent-gold { color: var(--accent-gold); }
        .text-dark-text { color: var(--dark-text); }

        .sidebar {
            transition: transform 0.3s ease-in-out;
        }

        .main-content {
            transition: margin-left 0.3s ease-in-out;
        }

        .sidebar-link {
            transition: background-color 0.2s, color 0.2s;
        }
        .sidebar-link:hover, .sidebar-link.active {
            background-color: var(--accent-gold);
            color: var(--dark-text);
            border-radius: 8px;
        }
        .sidebar-link.active i {
            color: var(--dark-text);
        }
        .card {
            background-color: var(--white);
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s;
        }
        .card:hover {
            transform: translateY(-5px);
        }
        .resource-link {
            display: block;
            padding: 1rem;
            border-radius: 8px;
            transition: background-color 0.3s ease;
            color: var(--dark-text);
        }
        .resource-link:hover {
            background-color: var(--light-yellow);
        }
        .journal-entry {
             background-color: #f9f9f9;
             border-left: 4px solid var(--primary-green);
             padding: 1rem;
             margin-bottom: 1rem;
             border-radius: 4px;
        }
        .bottom-nav-link {
            color: var(--dark-text);
            transition: color 0.2s;
        }
        .bottom-nav-link.active, .bottom-nav-link:hover {
            color: var(--primary-green);
        }
        .shadow-t-lg {
            box-shadow: 0 -4px 6px -1px rgb(0 0 0 / 0.1), 0 -2px 4px -2px rgb(0 0 0 / 0.1);
        }
        .achievement-card {
            filter: grayscale(100%);
            opacity: 0.5;
            transition: all 0.3s ease;
        }
        .achievement-card.unlocked {
            filter: grayscale(0%);
            opacity: 1;
        }
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.5);
            animation: fadeIn 0.3s;
        }
        .modal-content {
            animation: slideIn 0.3s;
        }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideIn { from { transform: translateY(-50px); opacity: 0 } to { transform: translateY(0); opacity: 1 } }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-light-green text-dark-text">

    <div class="md:flex h-screen">
        <!-- Sidebar for Desktop -->
        <aside id="sidebar" class="sidebar bg-primary-green text-white w-64 space-y-6 py-7 px-2 hidden md:flex md:flex-col">
            <a href="#" class="text-white flex items-center space-x-2 px-4">
                <i class="fas fa-child text-2xl text-accent-gold"></i>
                <span class="text-2xl font-extrabold">Beyond the Curve</span>
            </a>

            <nav>
                <a href="#home" class="sidebar-link active flex items-center space-x-3 py-3 px-4" onclick="showSection('home', this)">
                    <i class="fas fa-home text-accent-gold"></i>
                    <span>Home</span>
                </a>
                <a href="#trackers" class="sidebar-link flex items-center space-x-3 py-3 px-4" onclick="showSection('trackers', this)">
                    <i class="fas fa-chart-line text-accent-gold"></i>
                    <span>Trackers</span>
                </a>
                <a href="#journal" class="sidebar-link flex items-center space-x-3 py-3 px-4" onclick="showSection('journal', this)">
                    <i class="fas fa-book-open text-accent-gold"></i>
                    <span>Journal</span>
                </a>
                <a href="#community" class="sidebar-link flex items-center space-x-3 py-3 px-4" onclick="showSection('community', this)">
                    <i class="fas fa-users text-accent-gold"></i>
                    <span>Community</span>
                </a>
                <a href="#resources" class="sidebar-link flex items-center space-x-3 py-3 px-4" onclick="showSection('resources', this)">
                    <i class="fas fa-folder-open text-accent-gold"></i>
                    <span>Resources</span>
                </a>
            </nav>
        </aside>

        <!-- Main Content -->
        <div id="main-content" class="main-content flex-1 flex flex-col overflow-hidden">
            <header class="bg-white shadow-md p-4 flex justify-between items-center">
                <div class="w-8 md:w-0"></div> <!-- Placeholder to balance title -->
                <h1 id="section-title" class="text-2xl font-bold text-primary-green text-center flex-1">Home</h1>
                <div>
                    <!-- Placeholder for login/profile -->
                     <button class="bg-primary-green text-white font-bold py-2 px-4 rounded-lg hover:bg-accent-gold hover:text-dark-text transition">
                        Login with Google
                    </button>
                </div>
            </header>
            
            <main class="flex-1 overflow-x-hidden overflow-y-auto bg-light-green p-6 pb-24 md:pb-6">
                <!-- Home Section -->
                <section id="home" class="space-y-6">
                     <div class="card p-6 text-center">
                        <h2 class="text-3xl font-bold text-primary-green mb-2">Welcome to Beyond the Curve!</h2>
                        <p class="text-lg">Your all-in-one digital companion for the scoliosis journey. We're here to empower you with tools, community, and resources to build confidence and resilience.</p>
                    </div>
                    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <div class="card p-6 flex flex-col items-center text-center">
                            <i class="fas fa-chart-line text-4xl text-accent-gold mb-4"></i>
                            <h3 class="text-xl font-semibold mb-2 text-primary-green">Track Your Progress</h3>
                            <p>Monitor brace wear, physiotherapy, and growth to stay on top of your treatment.</p>
                        </div>
                         <div class="card p-6 flex flex-col items-center text-center">
                            <i class="fas fa-book-open text-4xl text-accent-gold mb-4"></i>
                            <h3 class="text-xl font-semibold mb-2 text-primary-green">Your Personal Journal</h3>
                            <p>A safe space to document your thoughts, feelings, and experiences along the way.</p>
                        </div>
                        <div class="card p-6 flex flex-col items-center text-center">
                            <i class="fas fa-users text-4xl text-accent-gold mb-4"></i>
                            <h3 class="text-xl font-semibold mb-2 text-primary-green">Connect with Community</h3>
                            <p>You are not alone. Find support groups and forums to connect with others on a similar path.</p>
                        </div>
                    </div>
                </section>

                <!-- Trackers Section -->
                <section id="trackers" class="hidden space-y-8">
                    <!-- Brace Wear Tracker -->
                    <div class="card p-6">
                        <div class="flex justify-between items-center mb-4">
                            <h2 class="text-2xl font-bold text-primary-green">Brace Wear Tracker</h2>
                            <div class="text-right">
                                <p class="font-bold text-lg text-accent-gold">üî• <span id="brace-streak">0</span> Day Streak</p>
                            </div>
                        </div>
                        <div class="grid md:grid-cols-2 gap-6 items-center">
                            <div>
                                <label for="brace-hours" class="block text-sm font-medium text-gray-700">Hours worn today:</label>
                                <div class="flex items-center mt-1">
                                    <input type="number" id="brace-hours" class="w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-green" placeholder="e.g., 18">
                                    <button onclick="addTrackerData('brace')" class="ml-3 bg-primary-green text-white font-bold py-2 px-4 rounded-lg hover:bg-accent-gold hover:text-dark-text transition">Log</button>
                                </div>
                            </div>
                            <div class="w-full h-48 md:h-full">
                                <canvas id="braceChart"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- Physiotherapy Tracker -->
                     <div class="card p-6">
                        <div class="flex justify-between items-center mb-4">
                            <h2 class="text-2xl font-bold text-primary-green">Physiotherapy Tracker</h2>
                            <div class="text-right">
                                <p class="font-bold text-lg text-accent-gold">üî• <span id="physio-streak">0</span> Day Streak</p>
                            </div>
                        </div>
                         <div class="grid md:grid-cols-2 gap-6 items-center">
                             <div>
                                 <label for="physio-minutes" class="block text-sm font-medium text-gray-700">Minutes of exercise today:</label>
                                 <div class="flex items-center mt-1">
                                     <input type="number" id="physio-minutes" class="w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-green" placeholder="e.g., 30">
                                     <button onclick="addTrackerData('physio')" class="ml-3 bg-primary-green text-white font-bold py-2 px-4 rounded-lg hover:bg-accent-gold hover:text-dark-text transition">Log</button>
                                 </div>
                             </div>
                             <div class="w-full h-48 md:h-full">
                                 <canvas id="physioChart"></canvas>
                             </div>
                         </div>
                    </div>
                    
                    <!-- Achievements Section -->
                    <div class="card p-6">
                        <h2 class="text-2xl font-bold text-primary-green mb-4">My Achievements</h2>
                        <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4 text-center">
                            <div id="ach-brace-7" class="achievement-card p-4 rounded-lg bg-light-yellow">
                                <div class="text-4xl">üèÜ</div>
                                <p class="font-semibold mt-2">7-Day Brace Streak</p>
                            </div>
                            <div id="ach-physio-7" class="achievement-card p-4 rounded-lg bg-light-yellow">
                                <div class="text-4xl">üí™</div>
                                <p class="font-semibold mt-2">7-Day PT Streak</p>
                            </div>
                             <div id="ach-brace-30" class="achievement-card p-4 rounded-lg bg-light-yellow">
                                <div class="text-4xl">üèÖ</div>
                                <p class="font-semibold mt-2">30-Day Brace Streak</p>
                            </div>
                            <div id="ach-physio-30" class="achievement-card p-4 rounded-lg bg-light-yellow">
                                <div class="text-4xl">üåü</div>
                                <p class="font-semibold mt-2">30-Day PT Streak</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Journal Section -->
                <section id="journal" class="hidden space-y-6">
                    <div class="card p-6">
                        <h2 class="text-2xl font-bold text-primary-green mb-4">My Scoliosis Journal</h2>
                        <textarea class="w-full h-48 p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-green" placeholder="How are you feeling today? Write about your journey..."></textarea>
                        <button class="mt-4 bg-primary-green text-white font-bold py-2 px-4 rounded-lg hover:bg-accent-gold hover:text-dark-text transition">Save Entry</button>
                    </div>
                     <div class="card p-6">
                         <h3 class="text-xl font-semibold text-primary-green mb-4">Past Entries</h3>
                         <div id="journal-entries">
                            <div class="journal-entry">
                                <p class="font-semibold">September 21, 2025</p>
                                <p>Feeling a little sore today after PT, but also feeling stronger. The exercises are tough but I know they are helping.</p>
                            </div>
                            <div class="journal-entry">
                                <p class="font-semibold">September 18, 2025</p>
                                <p>Got my brace adjusted today. It feels a bit tight, but the doctor said that's normal. Trying to stay positive!</p>
                            </div>
                         </div>
                    </div>
                </section>

                <!-- Community Section -->
                <section id="community" class="hidden text-center">
                     <div class="card p-6">
                        <i class="fas fa-users text-6xl text-accent-gold mb-4"></i>
                        <h2 class="text-3xl font-bold text-primary-green mb-4">Join the Community</h2>
                        <p class="text-lg mb-6">Connecting with others who understand is powerful. Our community features are currently under development. Soon, you'll be able to access moderated forums and find links to amazing support groups.</p>
                        <div class="bg-light-yellow p-4 rounded-lg">
                            <p class="font-semibold">Coming Soon: Secure forums, Discord channels, and more!</p>
                        </div>
                    </div>
                </section>

                <!-- Resources Section -->
                <section id="resources" class="hidden space-y-8">
                    <!-- Major Organizations -->
                    <div>
                        <h2 class="text-2xl font-bold text-primary-green mb-4">Major Organizations</h2>
                        <div class="grid md:grid-cols-2 gap-4">
                           <a href="https://www.srs.org/" target="_blank" class="resource-link card">
                               <h3 class="font-semibold text-lg">Scoliosis Research Society (SRS)</h3>
                               <p class="text-sm">A leading international society for spinal deformity research and education.</p>
                           </a>
                           <a href="https://www.scoliosis.org/" target="_blank" class="resource-link card">
                                <h3 class="font-semibold text-lg">National Scoliosis Foundation (NSF)</h3>
                                <p class="text-sm">Provides patient support, education, and advocacy.</p>
                           </a>
                           <a href="https://www.settingscoliosisstraight.org/" target="_blank" class="resource-link card">
                                <h3 class="font-semibold text-lg">Setting Scoliosis Straight</h3>
                                <p class="text-sm">Focuses on advancing techniques and discoveries in spinal deformity treatment.</p>
                           </a>
                           <a href="https://www.curvygirlsscoliosis.com/" target="_blank" class="resource-link card">
                                <h3 class="font-semibold text-lg">Curvy Girls Scoliosis Foundation</h3>
                                <p class="text-sm">An international, peer-led support group for girls with scoliosis.</p>
                           </a>
                        </div>
                    </div>
                     <!-- Medical Institutions -->
                    <div>
                        <h2 class="text-2xl font-bold text-primary-green mb-4">Top Medical Institutions</h2>
                        <div class="grid md:grid-cols-2 gap-4">
                           <a href="https://www.mayoclinic.org/diseases-conditions/scoliosis/symptoms-causes/syc-20350716" target="_blank" class="resource-link card">
                               <h3 class="font-semibold text-lg">Mayo Clinic</h3>
                               <p class="text-sm">Comprehensive information on symptoms, causes, and treatment.</p>
                           </a>
                           <a href="https://www.hopkinsmedicine.org/health/conditions-and-diseases/scoliosis" target="_blank" class="resource-link card">
                                <h3 class="font-semibold text-lg">Johns Hopkins Medicine</h3>
                                <p class="text-sm">Detailed resources on various types of scoliosis.</p>
                           </a>
                           <a href="https://www.childrenshospital.org/conditions/scoliosis" target="_blank" class="resource-link card">
                                <h3 class="font-semibold text-lg">Boston Children's Hospital</h3>
                                <p class="text-sm">Specialized pediatric care information for scoliosis.</p>
                           </a>
                            <a href="https://www.hss.edu/condition-list_scoliosis.asp" target="_blank" class="resource-link card">
                                <h3 class="font-semibold text-lg">Hospital for Special Surgery (HSS)</h3>
                                <p class="text-sm">Expert insights into surgical and non-surgical treatments.</p>
                           </a>
                        </div>
                    </div>
                    <!-- Support Groups -->
                    <div>
                         <h2 class="text-2xl font-bold text-primary-green mb-4">Support Groups & Forums</h2>
                         <div class="grid md:grid-cols-2 gap-4">
                            <a href="https://www.bracingforscoliosus.org/" target="_blank" class="resource-link card">
                                <h3 class="font-semibold text-lg">Scolio-us</h3>
                                <p class="text-sm">Community and resources with a focus on bracing and mental health.</p>
                            </a>
                             <a href="https://www.facebook.com/groups/scoliosissupportgroup/" target="_blank" class="resource-link card">
                                <h3 class="font-semibold text-lg">Scoliosis Support & Education Group</h3>
                                <p class="text-sm">A large and active Facebook community for patients and families.</p>
                            </a>
                         </div>
                    </div>
                </section>
            </main>
        </div>
    </div>

    <!-- Achievement Unlocked Modal -->
    <div id="achievementModal" class="modal">
        <div class="modal-content bg-white p-8 rounded-lg max-w-sm mx-auto mt-20 text-center relative shadow-xl">
            <span class="absolute top-2 right-4 text-2xl cursor-pointer text-gray-500" onclick="closeModal()">&times;</span>
            <div id="modal-icon" class="text-6xl mb-4"></div>
            <h2 class="text-2xl font-bold text-primary-green mb-2">Achievement Unlocked!</h2>
            <p id="modal-text" class="text-lg text-dark-text"></p>
        </div>
    </div>

    <!-- Bottom Navigation Bar for Mobile -->
    <nav id="bottom-nav" class="md:hidden fixed bottom-0 left-0 right-0 bg-white shadow-t-lg z-30">
        <div class="flex justify-around w-full">
            <a href="#home" class="bottom-nav-link active flex-grow flex flex-col items-center text-center py-2 px-1" onclick="showSection('home', this)">
                <i class="fas fa-home text-xl"></i>
                <span class="text-xs mt-1">Home</span>
            </a>
            <a href="#trackers" class="bottom-nav-link flex-grow flex flex-col items-center text-center py-2 px-1" onclick="showSection('trackers', this)">
                <i class="fas fa-chart-line text-xl"></i>
                <span class="text-xs mt-1">Trackers</span>
            </a>
            <a href="#journal" class="bottom-nav-link flex-grow flex flex-col items-center text-center py-2 px-1" onclick="showSection('journal', this)">
                <i class="fas fa-book-open text-xl"></i>
                <span class="text-xs mt-1">Journal</span>
            </a>
            <a href="#community" class="bottom-nav-link flex-grow flex flex-col items-center text-center py-2 px-1" onclick="showSection('community', this)">
                <i class="fas fa-users text-xl"></i>
                <span class="text-xs mt-1">Community</span>
            </a>
            <a href="#resources" class="bottom-nav-link flex-grow flex flex-col items-center text-center py-2 px-1" onclick="showSection('resources', this)">
                <i class="fas fa-folder-open text-xl"></i>
                <span class="text-xs mt-1">Resources</span>
            </a>
        </div>
    </nav>

    <script>
        // --- STATE MANAGEMENT ---
        let trackerData = {
            brace: [], // { date: 'YYYY-MM-DD', value: hours }
            physio: [] // { date: 'YYYY-MM-DD', value: minutes }
        };

        let achievements = {
            'brace-7': false,
            'physio-7': false,
            'brace-30': false,
            'physio-30': false
        };

        let charts = {};

        // --- INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            loadData();
            initializeCharts();
            updateAllUI();
        });

        function loadData() {
            const savedData = localStorage.getItem('beyondTheCurveTrackerData');
            if (savedData) {
                trackerData = JSON.parse(savedData);
            }
            const savedAchievements = localStorage.getItem('beyondTheCurveAchievements');
            if (savedAchievements) {
                achievements = JSON.parse(savedAchievements);
            }
        }

        function saveData() {
            localStorage.setItem('beyondTheCurveTrackerData', JSON.stringify(trackerData));
            localStorage.setItem('beyondTheCurveAchievements', JSON.stringify(achievements));
        }
        
        // --- UI & NAVIGATION ---
        function showSection(sectionId, clickedElement) {
// ... existing code ... -->
            if (bottomNavLink) {
                bottomNavLink.classList.add('active');
            }


            // Update header title
            const title = clickedElement.querySelector('span').textContent;
            document.getElementById('section-title').textContent = title;
        }

        function updateAllUI() {
            updateStreaks();
            updateCharts();
            renderAchievements();
        }

        // --- TRACKER LOGIC ---
        function addTrackerData(type) {
            const input = document.getElementById(`${type}-hours`) || document.getElementById(`${type}-minutes`);
            const value = parseFloat(input.value);

            if (!value || value <= 0) {
                alert("Please enter a valid positive number.");
                return;
            }

            const today = new Date().toISOString().split('T')[0];
            
            // Check if there's already an entry for today and update it, otherwise add new
            const todayEntryIndex = trackerData[type].findIndex(entry => entry.date === today);
            if(todayEntryIndex > -1) {
                trackerData[type][todayEntryIndex].value = value;
            } else {
                 trackerData[type].push({ date: today, value: value });
            }

            input.value = '';
            saveData();
            updateAllUI();
            checkAchievements();
        }

        function calculateStreak(data) {
            if (!data || data.length === 0) return 0;
            
            const dates = new Set(data.map(entry => entry.date));
            let streak = 0;
            let checkDate = new Date();

            // Check for today
            if (dates.has(checkDate.toISOString().split('T')[0])) {
                streak++;
                checkDate.setDate(checkDate.getDate() - 1);
            } else {
                // If no entry for today, check for yesterday to start the streak
                 checkDate.setDate(checkDate.getDate() - 1);
                 if(!dates.has(checkDate.toISOString().split('T')[0])) {
                     return 0; // No entry today or yesterday
                 }
                 streak++;
                 checkDate.setDate(checkDate.getDate() - 1);
            }
            
            while (dates.has(checkDate.toISOString().split('T')[0])) {
                streak++;
                checkDate.setDate(checkDate.getDate() - 1);
            }

            return streak;
        }

        function updateStreaks() {
            document.getElementById('brace-streak').textContent = calculateStreak(trackerData.brace);
            document.getElementById('physio-streak').textContent = calculateStreak(trackerData.physio);
        }

        // --- ACHIEVEMENTS ---
        const achievementMeta = {
            'brace-7': { name: "7-Day Brace Streak", icon: "üèÜ"},
            'physio-7': { name: "7-Day PT Streak", icon: "üí™"},
            'brace-30': { name: "30-Day Brace Streak", icon: "üèÖ"},
            'physio-30': { name: "30-Day PT Streak", icon: "üåü"}
        };

        function checkAchievements() {
            const braceStreak = calculateStreak(trackerData.brace);
            const physioStreak = calculateStreak(trackerData.physio);

            const milestones = {
                'brace-7': braceStreak >= 7,
                'physio-7': physioStreak >= 7,
                'brace-30': braceStreak >= 30,
                'physio-30': physioStreak >= 30
            };

            for (const key in milestones) {
                if (milestones[key] && !achievements[key]) {
                    achievements[key] = true;
                    showAchievementModal(key);
                }
            }
            saveData();
            renderAchievements();
        }
        
        function renderAchievements() {
            for (const key in achievements) {
                const element = document.getElementById(`ach-${key}`);
                if (achievements[key] && element) {
                    element.classList.add('unlocked');
                }
            }
        }

        function showAchievementModal(key) {
            const modal = document.getElementById('achievementModal');
            document.getElementById('modal-icon').textContent = achievementMeta[key].icon;
            document.getElementById('modal-text').textContent = `You've unlocked the "${achievementMeta[key].name}" achievement! Keep up the great work!`;
            modal.style.display = 'flex';
            modal.style.alignItems = 'center';
            modal.style.justifyContent = 'center';
        }

        function closeModal() {
            document.getElementById('achievementModal').style.display = 'none';
        }
        
        // --- CHARTS ---
        function initializeCharts() {
            const commonOptions = {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: { beginAtZero: true, grid: { color: '#e0e0e0' } },
                    x: { grid: { display: false } }
                },
                plugins: { legend: { display: false } }
            };

            charts.brace = new Chart(document.getElementById('braceChart'), {
                type: 'bar',
                data: { labels: [], datasets: [{ label: 'Hours', data: [], backgroundColor: '#FFD700', borderRadius: 4 }] },
                options: commonOptions
            });

            charts.physio = new Chart(document.getElementById('physioChart'), {
                type: 'bar',
                data: { labels: [], datasets: [{ label: 'Minutes', data: [], backgroundColor: '#4CAF50', borderRadius: 4 }] },
                options: commonOptions
            });
        }
        
        function updateCharts() {
            updateSingleChart('brace', charts.brace);
            updateSingleChart('physio', charts.physio);
        }

        function updateSingleChart(type, chartInstance) {
            const data = trackerData[type].slice(-7); // Get last 7 entries
            const labels = data.map(d => new Date(d.date).toLocaleDateString('en-US', { month: 'short', day: 'numeric' }));
            const values = data.map(d => d.value);

            chartInstance.data.labels = labels;
            chartInstance.data.datasets[0].data = values;
            chartInstance.update();
        }
    </script>
</body>
</html>

